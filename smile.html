<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smile Screen</title>
<style>
  body, html {
    height: 100%;
    margin: 0;
    font-family: 'Comic Sans MS', sans-serif;
    font-weight: bold;
    background-color: #f4f4f4;
    overflow-x: hidden; /* Prevents horizontal scrolling */
  }

  .header {
    font-size: 6vw; /* Adjusted for responsiveness */
    font-family: 'Comic Sans MS', cursive;
    color: #6ab47b;
    text-align: center;
    position: fixed;
    width: 100%;
    top: 3%;
    z-index: 2;
  }

  #smile-message-container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 96%; /* Adjusted for padding */
    height: auto; /* Changed to auto to fit content */
    padding: 2%;
    text-align: center;
    background-color: white;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  #smile-message {
    font-size: calc(5vw + 50px); /* Mix of viewport and static sizing */
    color: #333;
  }

  #feedback-message {
    font-size: calc(3vw + 15px); /* Mix of viewport and static sizing */
    
</style>
</head>
<body>

<!-- This container will hold the message -->
<div id="smile-message-container" style="background-image: url('smile-bg1.png');">
  <p id="smile-message"></p>
  <p id="feedback-message"></p>
</div>

<script src="https://hammerjs.github.io/dist/hammer.min.js"></script>
<script>
// Messages array
const messages = [
  "A sunny day makes me smile",
  "A child's laughter can make me smile",
  // ... (the rest of your messages)
];

// Feedback messages for swipes
const upswipeMessages = [
  "I agree", "Yes", "True", "Yep", "That's me", "Exactly", "Yeah", "ðŸ˜„", "Sometimes", "Fair enough", "I like that", "Like", "Up Swipe", "Sure", "Always"
];

const downswipeMessages = [
  "Nope", "Rarely", "Hardly", "Not really", "Probably not", "No way", "I don't like that", "Nah", "ðŸ˜ž", "Not so", "Not me", "Unlikely", "I don't think so", "No", "Never", "Yeah right", "Umm No"
];

// Arrays to store liked and excluded messages
let myMessages = JSON.parse(localStorage.getItem('me_messages')) || [];
let excludedMessages = JSON.parse(localStorage.getItem('excluded_messages')) || [];

// Function to display a message
function displayMessage(index) {
  const messageContainer = document.getElementById('smile-message-container');
  const messageParagraph = document.getElementById('smile-message');
  messageParagraph.textContent = messages[index];
  messageContainer.style.backgroundImage = `url('smile-bg${index + 1}.png')`;
}

// Function to display feedback message
function displayFeedbackMessage(isUpSwipe) {
  const feedbackMessage = document.getElementById('feedback-message');
  const messageArray = isUpSwipe ? upswipeMessages : downswipeMessages;
  const randomIndex = Math.floor(Math.random() * messageArray.length);
  feedbackMessage.textContent = messageArray[randomIndex];
  setTimeout(() => feedbackMessage.textContent = '', 2000); // Clear after 2 seconds
}

// Initialize Hammer.js on the message container
const messageContainer = document.getElementById('smile-message-container');
const hammer = new Hammer(messageContainer);
hammer.get('swipe').set({ direction: Hammer.DIRECTION_VERTICAL });

// Handling swipe gestures
hammer.on('swipeup', function() {
  if (!myMessages.includes(messages[currentIndex])) {
    myMessages.push(messages[currentIndex]);
  }
  displayFeedbackMessage(true);
  currentIndex = (currentIndex + 1) % messages.length;
  displayMessage(currentIndex);
  saveState();
});

hammer.on('swipedown', function(e) {
  e.preventDefault(); // Prevent page refresh
  const messageIndex = myMessages.indexOf(messages[currentIndex]);
  if (messageIndex !== -1) {
    myMessages.splice(messageIndex, 1);
  } else if (!excludedMessages.includes(messages[currentIndex])) {
    excludedMessages.push(messages[currentIndex]);
  }
  displayFeedbackMessage(false);
  currentIndex = (currentIndex + 1) % messages.length;
  displayMessage(currentIndex);
  saveState();
});

// Save state to localStorage
function saveState() {
  localStorage.setItem('me_messages', JSON.stringify(myMessages));
  localStorage.setItem('excluded_messages', JSON.stringify(excludedMessages));
}

// Start with the first message
let currentIndex = 0;
displayMessage(currentIndex);

</script>
</body>
</html>
